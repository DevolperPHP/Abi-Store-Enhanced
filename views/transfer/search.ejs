<%- include("../layout/navbar") -%>

<link rel="stylesheet" href="/css/transfer.css">

<div class="transfer-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">
            <ion-icon name="search-outline"></ion-icon>
            Search Results
        </h1>
        <p class="page-subtitle">Select items to add to transfer</p>
    </div>

    <!-- Back Button -->
    <div class="keep-card" style="margin-bottom: var(--space-lg);">
        <div class="keep-card-body">
            <button class="keep-btn keep-btn-secondary" onclick="window.location.href='/transfer'">
                <ion-icon name="arrow-back-outline"></ion-icon>
                Back to Transfer
            </button>
        </div>
    </div>

    <!-- Results Grid -->
    <% if(products.length > 0) { %>
        <div class="search-results">
            <div class="search-grid">
                <% products.forEach(product => { %>
                    <div class="product-card" onclick="window.location.href='/transfer/search/get-qty/<%= product._id %>'">
                        <div class="product-image-container">
                            <img src="/upload/images/<%= product.image %>" alt="<%= product.name %>">
                        </div>
                        <div class="product-card-body">
                            <h3 class="product-name"><%= product.name %></h3>
                            <div class="product-meta">
                                <div class="meta-row">
                                    <ion-icon name="resize-outline"></ion-icon>
                                    <span>Size: <%= product.size %></span>
                                </div>
                                <div class="meta-color">
                                    <ion-icon name="color-palette-outline"></ion-icon>
                                    <span>Color: <%= product.colorName %></span>
                                    <div class="color-swatch" style="background-color: <%= product.color %>"></div>
                                </div>
                                <div class="meta-row">
                                    <ion-icon name="cube-outline"></ion-icon>
                                    <span>In Stock: <%= product.qty %> units</span>
                                </div>
                            </div>
                            <div class="product-actions">
                                <div class="product-price">
                                    <ion-icon name="pricetags-outline"></ion-icon>
                                    <span style="font-size: 13px; font-weight: 600; color: var(--text-secondary);">
                                        <%= product.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %> IQD
                                    </span>
                                </div>
                                <button class="keep-btn keep-btn-primary keep-btn-icon" title="Add to transfer">
                                    <ion-icon name="add-outline"></ion-icon>
                                </button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    <% } else { %>
        <!-- Empty State -->
        <div class="keep-card">
            <div class="empty-state">
                <div class="empty-icon">
                    <ion-icon name="search-outline"></ion-icon>
                </div>
                <h3 class="empty-title">No Products Found</h3>
                <p class="empty-description">
                    We couldn't find any products matching your search criteria.
                    Try adjusting your search terms or browse all items.
                </p>
                <button class="keep-btn keep-btn-primary" onclick="window.location.href='/transfer'">
                    <ion-icon name="arrow-back-outline"></ion-icon>
                    Back to Transfer
                </button>
            </div>
        </div>
    <% } %>
</div>

<%- include("../layout/footer") -%>
